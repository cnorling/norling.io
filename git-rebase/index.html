<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Have you or a loved one ever wanted to:
delete a commit edit the content of a commit remove a specific file that was accidentally added to a commit include missed files in a commit fix a typo in an old commit message combine a bunch of commits together If you&amp;rsquo;ve worked with git, you&amp;rsquo;ve likely needed to do at least one of these at some point. And if you&amp;rsquo;re like me, you&amp;rsquo;ve probably read over the --help documentation of git to figure out how to do some of these things, and oh boy the docs can be cagey about telling you what exactly to do."><title>Rewriting History With Git Rebases</title><link rel=canonical href=https://norling.io/git-rebase/><link rel=stylesheet href=/scss/style.min.fe253589db5a54c99fe6b16bfbaf0243d856d34f8c07f3534613b39ed043b738.css><meta property="og:title" content="Rewriting History With Git Rebases"><meta property="og:description" content="Have you or a loved one ever wanted to:
delete a commit edit the content of a commit remove a specific file that was accidentally added to a commit include missed files in a commit fix a typo in an old commit message combine a bunch of commits together If you&amp;rsquo;ve worked with git, you&amp;rsquo;ve likely needed to do at least one of these at some point. And if you&amp;rsquo;re like me, you&amp;rsquo;ve probably read over the --help documentation of git to figure out how to do some of these things, and oh boy the docs can be cagey about telling you what exactly to do."><meta property="og:url" content="https://norling.io/git-rebase/"><meta property="og:site_name" content="Cerise Norling"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="git"><meta property="article:published_time" content="2023-03-06T10:00:00-06:00"><meta property="article:modified_time" content="2023-03-06T10:00:00-06:00"><meta property="og:image" content="https://norling.io/git-rebase/stars-ijf3k5368.jpg"><meta name=twitter:title content="Rewriting History With Git Rebases"><meta name=twitter:description content="Have you or a loved one ever wanted to:
delete a commit edit the content of a commit remove a specific file that was accidentally added to a commit include missed files in a commit fix a typo in an old commit message combine a bunch of commits together If you&amp;rsquo;ve worked with git, you&amp;rsquo;ve likely needed to do at least one of these at some point. And if you&amp;rsquo;re like me, you&amp;rsquo;ve probably read over the --help documentation of git to figure out how to do some of these things, and oh boy the docs can be cagey about telling you what exactly to do."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://norling.io/git-rebase/stars-ijf3k5368.jpg"><script async src="https://www.googletagmanager.com/gtag/js?id=G-XRKZVJ60B0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XRKZVJ60B0",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"dark")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src="https://avatars.githubusercontent.com/u/47022783?v=4" width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Cerise Norling</a></h1><h2 class=site-description>Another blog for devops things</h2></div></header><ol class=social-menu><li><a href=https://github.com/cnorling target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://norling.io/index.xml target=_blank title=RSS><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/git-rebase/><img src=/git-rebase/stars-ijf3k5368_hu353eec6600104335652ac7e019354282_892577_800x0_resize_q75_box.jpg srcset="/git-rebase/stars-ijf3k5368_hu353eec6600104335652ac7e019354282_892577_800x0_resize_q75_box.jpg 800w, /git-rebase/stars-ijf3k5368_hu353eec6600104335652ac7e019354282_892577_1600x0_resize_q75_box.jpg 1600w" width=800 height=450 loading=lazy alt="Featured image of post Rewriting History With Git Rebases"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/git-rebase/>Rewriting History With Git Rebases</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Mar 06, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>9 minute read</time></div></footer></div></header><section class=article-content><p>Have you or a loved one ever wanted to:</p><ul><li>delete a commit</li><li>edit the content of a commit</li><li>remove a specific file that was accidentally added to a commit</li><li>include missed files in a commit</li><li>fix a typo in an old commit message</li><li>combine a bunch of commits together</li></ul><p>If you&rsquo;ve worked with git, you&rsquo;ve likely needed to do at least one of these at some point. And if you&rsquo;re like me, you&rsquo;ve probably read over the <code>--help</code> documentation of git to figure out how to do some of these things, and oh boy the docs can be cagey about telling you what exactly to do. This article is a reference on just a few things you can do with git rebases, and how to do it. <a class=link href=https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History target=_blank rel=noopener>Here&rsquo;s the equivalent article</a> directly from the git documentation if you&rsquo;re interested in further reading.</p><h2 id=rewriting-history-is-controversial>Rewriting history is controversial</h2><p><em>Rebasing involves rewriting history.</em><br><em>Rewriting history involves force pushing to overwrite the remote state of a repository.</em><br><em>Force pushing has the potential to delete others work (if you rebase recklessly).</em></p><p>Rewriting history is controversial. Some say it&rsquo;s okay to modify history because it&rsquo;s sometimes necessary and can enhance git history. Others say it&rsquo;s not okay because git is supposed to be a historical representation of all changes, and you should prefer to roll your fixes forward. In my opinion if your historical modifications don&rsquo;t impact others, it should be acceptable to rewrite history. It&rsquo;s important when managing git history to ensure that you aren&rsquo;t impacting other people&rsquo;s work. You should follow these general practices:</p><ul><li>Always use <code>--force-with-lease</code> when pushing out rebases.</li><li>Avoid rewriting history if you&rsquo;re collaborating with others on the same branch.</li><li>If you have to rebase changes while working with others, <code>git pull</code> often to always make sure you&rsquo;re working with the latest content.</li><li>Don&rsquo;t edit other people&rsquo;s commits unless they know about and consent to the edits.</li></ul><h2 id=so-what-is-a-git-rebase>So what is a git rebase?</h2><p>A git rebase is the act of disassembling and reassembling a range of commits. The function&rsquo;s name comes from its original purpose of changing the forked location of your branch to a different commit or branch. There are two general types of rebases. Ones that require human interaction to complete, and ones that do not. A human interactive rebase would involve doing things like adding, editing, deleting, combining, and splitting commits. A noninteractive rebase would be attaching your base to a different branch.</p><p>Interactive rebases are executed by running <code>git rebase --interactive $GITREVISION</code>
Non-interactive rebases are executed by running <code>git rebase $GITREVISION</code></p><h2 id=how-do-i-git-rebase>How do I git rebase?</h2><h3 id=determine-what-commits-to-rebase>Determine what commits to rebase</h3><p>You can use most valid forms of <a class=link href=https://git-scm.com/docs/gitrevisions target=_blank rel=noopener>gitrevision syntax</a>, but <code>git log --oneline</code> and <code>git reflog</code> are the most common options for discovering historical edits. <code>git log --oneline</code> will only show you commits. <code>git reflog</code> will show you commits in addition to actions you take like checking out branches, other rebases you&rsquo;ve done, git resets, commit amends, and other historical modifications made to git. The only time I use referential syntax is if I&rsquo;m recovering a previously deleted commit since git will locally log the commit even after deleting it.</p><p><img src=/git-rebase/reflog-vs-log.png width=1479 height=557 srcset="/git-rebase/reflog-vs-log_hu8e79abb3556b9acee6e463bc311d5ade_90512_480x0_resize_box_3.png 480w, /git-rebase/reflog-vs-log_hu8e79abb3556b9acee6e463bc311d5ade_90512_1024x0_resize_box_3.png 1024w" loading=lazy alt="an example showcasing the differences between a git log and git reflog with git commits in their relative positions" class=gallery-image data-flex-grow=265 data-flex-basis=637px></p><p>Here&rsquo;s a table of some gitrevision syntaxes you can use in a rebase, and what they roughly translate to.</p><div class=table-wrapper><table><thead><tr><th>syntax</th><th>meaning</th></tr></thead><tbody><tr><td><code>016a428</code></td><td>rebase all commits between HEAD and <code>016a428</code></td></tr><tr><td><code>HEAD@{5}</code></td><td>rebase all commits contained in my last 5 git actions</td></tr><tr><td><code>HEAD~5</code></td><td>rebase the last 5 commits</td></tr><tr><td><code>HEAD@{5hr}</code></td><td>rebase all commits made in the last 5 hours</td></tr><tr><td><code>':/^Foo'</code></td><td>rebase all commits made between HEAD and the first commit found with a commit message that matches the regular expression <code>^Foo</code></td></tr></tbody></table></div><p><img src=/git-rebase/git-log-output.png width=1024 height=300 srcset="/git-rebase/git-log-output_huca4dee658d4610e5872360461a217451_14147_480x0_resize_box_3.png 480w, /git-rebase/git-log-output_huca4dee658d4610e5872360461a217451_14147_1024x0_resize_box_3.png 1024w" loading=lazy alt="an example of the output from git log &ndash;oneline" class=gallery-image data-flex-grow=341 data-flex-basis=819px></p><h3 id=edit-your-git-rebase-todo>Edit your git-rebase-todo</h3><p>A <code>git-rebase-todo</code> file is a manifest containing all the commits in your rebase that you can edit to instruct git on what changes you want to make. It includes the action you want to do, the commit hash, and the commit message for easy identification. An example looks like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>pick</span> e9f16f3 baz
</span></span><span class=line><span class=cl><span class=nf>pick</span> ff783de buz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Rebase aa7b423..ff783de onto aa7b423 (2 commands)
</span></span></span><span class=line><span class=cl><span class=c>#
</span></span></span><span class=line><span class=cl><span class=c># Commands:
</span></span></span><span class=line><span class=cl><span class=c># p, pick &lt;commit&gt; = use commit
</span></span></span><span class=line><span class=cl><span class=c># r, reword &lt;commit&gt; = use commit, but edit the commit message
</span></span></span><span class=line><span class=cl><span class=c># e, edit &lt;commit&gt; = use commit, but stop for amending
</span></span></span><span class=line><span class=cl><span class=c># s, squash &lt;commit&gt; = use commit, but meld into previous commit
</span></span></span><span class=line><span class=cl><span class=c># f, fixup [-C | -c] &lt;commit&gt; = like &#34;squash&#34; but keep only the previous
</span></span></span><span class=line><span class=cl><span class=c>#                    commit&#39;s log message, unless -C is used, in which case
</span></span></span><span class=line><span class=cl><span class=c>#                    keep only this commit&#39;s message; -c is same as -C but
</span></span></span><span class=line><span class=cl><span class=c>#                    opens the editor
</span></span></span><span class=line><span class=cl><span class=c># x, exec &lt;command&gt; = run command (the rest of the line) using shell
</span></span></span><span class=line><span class=cl><span class=c># b, break = stop here (continue rebase later with &#39;git rebase --continue&#39;)
</span></span></span><span class=line><span class=cl><span class=c># d, drop &lt;commit&gt; = remove commit
</span></span></span><span class=line><span class=cl><span class=c># l, label &lt;label&gt; = label current HEAD with a name
</span></span></span><span class=line><span class=cl><span class=c># t, reset &lt;label&gt; = reset HEAD to a label
</span></span></span><span class=line><span class=cl><span class=c># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]
</span></span></span><span class=line><span class=cl><span class=c># .       create a merge commit using the original merge commit&#39;s
</span></span></span><span class=line><span class=cl><span class=c># .       message (or the oneline, if no original merge commit was
</span></span></span><span class=line><span class=cl><span class=c># .       specified); use -c &lt;commit&gt; to reword the commit message
</span></span></span><span class=line><span class=cl><span class=c>#
</span></span></span><span class=line><span class=cl><span class=c># These lines can be re-ordered; they are executed from top to bottom.
</span></span></span><span class=line><span class=cl><span class=c>#
</span></span></span><span class=line><span class=cl><span class=c># If you remove a line here THAT COMMIT WILL BE LOST.
</span></span></span><span class=line><span class=cl><span class=c>#
</span></span></span><span class=line><span class=cl><span class=c># However, if you remove everything, the rebase will be aborted.
</span></span></span><span class=line><span class=cl><span class=c>#
</span></span></span></code></pre></td></tr></table></div></div><p>The only commands in that list I haven&rsquo;t used are exec, break, label, reset, and merge.</p><h3 id=start-the-rebase>Start the rebase</h3><p>As soon as you save the <code>git-rebase-todo</code> file and close it, the rebase will start. The first step git does is it saves all your commits into a staging area for safekeeping if you need to perform any reversions. Then it goes through each commit oldest to newest. Actions like pick, squash, fixup, and drop will be executed automatically. Actions like reword and edit will pause for you to make your requested changes. If it&rsquo;s a git message change, it will open the commit message file and allow you to make your changes.</p><p>Edit steps are a bit more complex. Git has no idea what modifications you intend to make on the edit step, so you need to tell it when you&rsquo;re finished. You can make any changes you need to the commit, and once you&rsquo;re finished you run <code>git commit --amend</code> to add your content to the commit. Then run <code>git rebase --continue</code> to tell git you&rsquo;re done with the current commit.</p><h3 id=push-up-your-rebase>Push up your rebase</h3><p>If you&rsquo;re editing any commits that aren&rsquo;t strictly local to your machine, you&rsquo;ll have to instruct your remote git website that yes, you did mean to delete that commit. To do this, run <code>git push --force-with-lease</code>. If you don&rsquo;t, git will reject your changes when you try and push because it thinks it has content you&rsquo;re missing that you need to pull down.</p><p><code>--force-with-lease</code> is the same as <code>--force</code> except it has a failsafe to abort if there are remote changes your local git client doesn&rsquo;t know about. Always use it when force pushing changes.</p><h2 id=deleting-commits>Deleting commits</h2><ol><li>Determine what commits you want to delete by running <code>git log --oneline</code> and find the hash of the commit you intend to delete</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>486f3bf</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> e18155c658
</span></span><span class=line><span class=cl><span class=nf>28cabde</span> 0523d2af6c
</span></span><span class=line><span class=cl><span class=nf>58098cf</span> 5a0be3f060
</span></span><span class=line><span class=cl><span class=nf>add66be</span> <span class=m>8759405589</span> <span class=c># let&#39;s delete this commit
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>76d462d</span> f6ecfd8500
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> <span class=o>(</span><span class=nf>origin</span>/main, origin/HEAD<span class=o>)</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>Go one past that commit and copy its hash</li><li>Run <code>git rebase --interactive 76d462d</code></li><li>Modify the <code>git-rebase-todo</code> to delete the commit</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>drop</span> add66be <span class=m>8759405589</span> <span class=c># I&#39;ve change the action on this commit to drop
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>pick</span> 58098cf 5a0be3f060
</span></span><span class=line><span class=cl><span class=nf>pick</span> 28cabde 0523d2af6c
</span></span><span class=line><span class=cl><span class=nf>pick</span> 486f3bf e18155c658
</span></span></code></pre></td></tr></table></div></div><ol start=5><li>Save and close the <code>git-rebase-todo</code></li><li>Run <code>git push --force-with-lease</code> if working with remote changes to overwrite history</li></ol><p>If everything worked, the commit should be gone. You can run <code>git log --oneline</code> to validate its deletion.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>6144ecd</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> e18155c658
</span></span><span class=line><span class=cl><span class=nf>28971d0</span> 0523d2af6c
</span></span><span class=line><span class=cl><span class=nf>ee09104</span> 5a0be3f060
</span></span><span class=line><span class=cl><span class=c># yay the commit is gone!
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>76d462d</span> f6ecfd8500
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> <span class=o>(</span><span class=nf>origin</span>/main, origin/HEAD<span class=o>)</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><h2 id=editing-commit-content>Editing commit content</h2><ol><li>Determine what commit you want to edit by running <code>git log --oneline</code> and find the SHA of the commit you intend to modify</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>2f512ca</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> b8e34da2fb
</span></span><span class=line><span class=cl><span class=nf>1daec94</span> 53a8322ae0
</span></span><span class=line><span class=cl><span class=nf>49338d3</span> <span class=m>1890202347</span> <span class=c># let&#39;s edit this commit
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>6dd4f4e</span> 3fc41f2708
</span></span><span class=line><span class=cl><span class=nf>10b8051</span> 79d8d9fc4b
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>Go one past that commit and copy its commit SHA</li><li>Run <code>git rebase --interactive 6dd4f4e</code></li><li>Modify the <code>git-rebase-todo</code> to include your request to edit the commit</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>edit</span> 49338d3 <span class=m>1890202347</span> <span class=c># I&#39;ve changed the action on this commit to edit
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>pick</span> 1daec94 53a8322ae0
</span></span><span class=line><span class=cl><span class=nf>pick</span> 2f512ca b8e34da2fb
</span></span></code></pre></td></tr></table></div></div><ol start=5><li>Save and close the <code>git-rebase-todo</code></li><li>Git will pause on the commit you want to edit</li><li>Make your changes and run <code>git commit --amend</code> to include the edits</li><li>Run <code>git rebase --continue</code> to tell git you&rsquo;re done making your changes</li><li>Run <code>git push --force-with-lease</code> if working with remote changes to overwrite history</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>2093981</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> b8e34da2fb
</span></span><span class=line><span class=cl><span class=nf>d3ecdd3</span> 53a8322ae0
</span></span><span class=line><span class=cl><span class=nf>12d9704</span> <span class=m>1890202347</span> <span class=c># this commit has a new SHA meaning the changes went through!
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>6dd4f4e</span> 3fc41f2708
</span></span><span class=line><span class=cl><span class=nf>10b8051</span> 79d8d9fc4b
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><p>If everything worked, the commit should be edited with a new SHA. You can run <code>git log --oneline</code> to validate its modification.</p><h2 id=combining-commits-by-squashing>Combining commits by squashing</h2><ol><li>Determine what commits you want to squash by running <code>git log --oneline</code> and find the hash of the oldest commit you want to squash</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>c3640e6</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> 7ce9769337
</span></span><span class=line><span class=cl><span class=nf>9f2e595</span> 3c8c13dfff <span class=c># let&#39;s squash these two commits
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>e1fce22</span> 600affbb4a <span class=c># let&#39;s squash these two commits
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>ed85848</span> <span class=m>1186105185</span> <span class=c># into this commit
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>64378f8</span> c8f8d0faf9
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>go one past that commit and copy its hash</li><li>run <code>git rebase --interactive 64378f8</code></li><li>modify the <code>git-rebase-todo</code> to include your squashes</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>pick</span> ed85848 <span class=m>1186105185</span> <span class=c># this is the commit we&#39;re squashing into
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>squash</span> e1fce22 600affbb4a <span class=c># these are the commits we&#39;re squashing
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>squash</span> 9f2e595 3c8c13dfff <span class=c># these are the commits we&#39;re squashing
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>pick</span> c3640e6 7ce9769337
</span></span></code></pre></td></tr></table></div></div><ol start=5><li>save and close the <code>git-rebase-todo</code></li><li>git will pause on the newly squashed commit and give you an opportunity to modify the commit message if desired</li><li>save and close the <code>COMMIT_EDITMSG</code> file to finish the rebase</li><li>run <code>git push --force-with-lease</code> if working with remote changes to overwrite history</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fish data-lang=fish><span class=line><span class=cl><span class=nf>8188e83</span> <span class=o>(</span><span class=nf>HEAD</span> <span class=na>-&gt;</span> main<span class=o>)</span> 7ce9769337
</span></span><span class=line><span class=cl><span class=nf>1b4f942</span> <span class=m>1186105185</span> <span class=c># the commit has a new SHA meaning the commits were squashed in!
</span></span></span><span class=line><span class=cl><span class=c></span><span class=nf>64378f8</span> c8f8d0faf9
</span></span><span class=line><span class=cl><span class=nf>beeef8f</span> Initial commit
</span></span></code></pre></td></tr></table></div></div><p>If everything worked, the commit should be edited with a new SHA. You can run <code>git log --oneline</code> to validate its modification.</p><p>If you enjoyed this article, have any questions, noticed something inaccurate, or you just want to say hi feel free to drop a comment below or send an email to <a class=link href=mailto:me@norling.io>me@norling.io</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/git/>git</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/rebase-recovery/><div class=article-image><img src=/rebase-recovery/_hu3d03a01dcc18bc5be0e67db3d8d209a6_2434332_1495786b6e673c6755740d7ebc070bf0.jpg width=250 height=150 loading=lazy alt="Featured image of post Recovering From a Botched Git Rebase" data-key=rebase-recovery data-hash="md5-1k9SF9sejUABO20udNxpSw=="></div><div class=article-details><h2 class=article-title>Recovering From a Botched Git Rebase</h2></div></a></article><article class=has-image><a href=/merge-conflicts/><div class=article-image><img src=/merge-conflicts/pexels-pixabay-41951.0c2ac6a5bd625b62818dc5a15173d612_hu3d03a01dcc18bc5be0e67db3d8d209a6_204362_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Easily Resolving Git Merge Conflicts" data-key=merge-conflicts data-hash="md5-DCrGpb1iW2KBjcWhUXPWEg=="></div><div class=article-details><h2 class=article-title>Easily Resolving Git Merge Conflicts</h2></div></a></article><article class=has-image><a href=/edit-commit-messages/><div class=article-image><img src=/edit-commit-messages/stars-gdb805d2e7_1920.8403b71cae92f1c5181c92cfb3b7203c_hu641232453ba7f7a6fa7a111613442a7d_527261_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Editing Git Commit Messages" data-key=edit-commit-messages data-hash="md5-hAO3HK6S8cUYHJLPs7cgPA=="></div><div class=article-details><h2 class=article-title>Editing Git Commit Messages</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=cnorling/norling.io issue-term=pathname crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 Cerise Norling</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#rewriting-history-is-controversial>Rewriting history is controversial</a></li><li><a href=#so-what-is-a-git-rebase>So what is a git rebase?</a></li><li><a href=#how-do-i-git-rebase>How do I git rebase?</a><ol><li><a href=#determine-what-commits-to-rebase>Determine what commits to rebase</a></li><li><a href=#edit-your-git-rebase-todo>Edit your git-rebase-todo</a></li><li><a href=#start-the-rebase>Start the rebase</a></li><li><a href=#push-up-your-rebase>Push up your rebase</a></li></ol></li><li><a href=#deleting-commits>Deleting commits</a></li><li><a href=#editing-commit-content>Editing commit content</a></li><li><a href=#combining-commits-by-squashing>Combining commits by squashing</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>